<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>url ìš”ì•½ ê²°ê³¼</title>
</head>
<body>
    <h1>ğŸ”—URL ìš”ì•½ ê²°ê³¼</h1>
    {%if safe%}
    <div id="result" data-summary="{{ summary | safe}}"></div>
    <script>
        const raw = document.getElementById("result").dataset.summary;
        const text =raw.replace(/\\n/g, "\n");
        const target = document.getElementById("result");
        let i=0;
        function type()
        {
            if (i<text.length)
            {
                target.textContent += text.charAt(i);
                i++;
                setTimeout(type,20);
            }
        }
        target.textContent="";
        type();
    </script>
    {%else%}
    <script>
        const warn=confirm("ì´ ì‚¬ì´íŠ¸ëŠ” ì•ˆì „í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nê³„ì† ì§„í–‰ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?");
        if (warn)
        {
            const form = document.createElement("form");
            form.method="POST";
            form.action="/force_summaryurl";
            const input = document.createElement("input");
            input.type="hidden";
            input.name="url";
            input.value="{{url}}";
            form.appendChild(input);
            document.body.appendChild(form);
            form.submit();
        }
        else
        {
            alert("ì·¨ì†Œ ë˜ì—ˆìŠµë‹ˆë‹¤.");
            window.location.href="/url";
        }
    </script>
    {%endif%}
</body>
</html>